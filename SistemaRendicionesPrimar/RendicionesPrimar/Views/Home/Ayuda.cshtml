@{
    ViewData["Title"] = "Ayuda";
}

<style>
    .help-header {
        background: var(--primar-white);
        border-radius: var(--primar-radius);
        box-shadow: var(--primar-shadow);
        padding: 32px;
        margin-bottom: 32px;
        border-left: 5px solid var(--primar-primary);
        position: relative;
        overflow: hidden;
    }

    .help-header::before {
        content: '';
        position: absolute;
        top: 0;
        right: 0;
        width: 200px;
        height: 200px;
        background: linear-gradient(135deg, rgba(37, 99, 235, 0.05) 0%, rgba(59, 130, 246, 0.05) 100%);
        border-radius: 50%;
        transform: translate(50%, -50%);
    }

    .header-content {
        position: relative;
        z-index: 1;
    }

    .header-title {
        font-size: 2rem;
        font-weight: 700;
        color: var(--primar-text);
        margin: 0;
        background: var(--primar-gradient);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
    }

    .header-subtitle {
        color: var(--primar-text-light);
        margin: 8px 0 0 0;
        font-size: 1rem;
    }

    .help-container {
        display: grid;
        grid-template-columns: 300px 1fr;
        gap: 32px;
        margin-top: 24px;
    }

    .help-nav {
        background: var(--primar-white);
        border-radius: var(--primar-radius);
        box-shadow: var(--primar-shadow);
        padding: 24px;
        height: fit-content;
        position: sticky;
        top: 100px;
        border: 1px solid var(--primar-border);
    }

    .help-nav h3 {
        font-size: 1.2rem;
        font-weight: 600;
        color: var(--primar-text);
        margin: 0 0 20px 0;
        padding-bottom: 12px;
        border-bottom: 2px solid var(--primar-border);
    }

    .help-topics {
        list-style: none;
        padding: 0;
        margin: 0;
    }

    .help-topics li {
        margin-bottom: 8px;
    }

    .help-topics li a {
        display: block;
        padding: 12px 16px;
        color: var(--primar-text);
        text-decoration: none;
        border-radius: var(--primar-radius-sm);
        transition: var(--primar-transition);
        font-weight: 500;
        font-size: 0.9rem;
    }

    .help-topics li a:hover {
        background: var(--primar-gradient);
        color: white;
        text-decoration: none;
        transform: translateX(4px);
    }

    .help-content {
        background: var(--primar-white);
        border-radius: var(--primar-radius);
        box-shadow: var(--primar-shadow);
        padding: 32px;
        border: 1px solid var(--primar-border);
    }

    .help-section {
        margin-bottom: 48px;
        scroll-margin-top: 120px;
    }

    .help-section:last-child {
        margin-bottom: 0;
    }

    .help-section h2 {
        font-size: 1.5rem;
        font-weight: 600;
        color: var(--primar-text);
        margin: 0 0 24px 0;
        padding-bottom: 12px;
        border-bottom: 2px solid var(--primar-border);
        display: flex;
        align-items: center;
        gap: 12px;
    }

    .help-section h2 i {
        color: var(--primar-primary);
        font-size: 1.3rem;
    }

    .help-steps {
        display: flex;
        flex-direction: column;
        gap: 24px;
    }

    .step {
        display: flex;
        align-items: flex-start;
        gap: 20px;
        padding: 24px;
        background: var(--primar-secondary);
        border-radius: var(--primar-radius);
        border-left: 4px solid var(--primar-primary);
    }

    .step-number {
        width: 40px;
        height: 40px;
        background: var(--primar-gradient);
        color: white;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-weight: 700;
        font-size: 1.1rem;
        flex-shrink: 0;
    }

    .step-content h4 {
        font-size: 1.1rem;
        font-weight: 600;
        color: var(--primar-text);
        margin: 0 0 8px 0;
    }

    .step-content p {
        color: var(--primar-text-light);
        margin: 0;
        line-height: 1.6;
    }

    .estados-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
        gap: 24px;
    }

    .estado-item {
        display: flex;
        align-items: flex-start;
        gap: 16px;
        padding: 24px;
        background: var(--primar-secondary);
        border-radius: var(--primar-radius);
        border: 1px solid var(--primar-border);
        transition: var(--primar-transition);
    }

    .estado-item:hover {
        transform: translateY(-2px);
        box-shadow: var(--primar-shadow-hover);
    }

    .estado-icon {
        width: 48px;
        height: 48px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 1.2rem;
        color: white;
        flex-shrink: 0;
    }

    .estado-icon.pendiente {
        background: linear-gradient(135deg, var(--primar-warning) 0%, #d97706 100%);
    }

    .estado-icon.aprobado-1 {
        background: linear-gradient(135deg, var(--primar-info) 0%, #0891b2 100%);
    }

    .estado-icon.aprobado-2 {
        background: linear-gradient(135deg, var(--primar-success) 0%, #059669 100%);
    }

    .estado-icon.pagado {
        background: linear-gradient(135deg, #fbbf24 0%, #f59e0b 100%);
    }

    .estado-info h4 {
        font-size: 1.1rem;
        font-weight: 600;
        color: var(--primar-text);
        margin: 0 0 8px 0;
    }

    .estado-info p {
        color: var(--primar-text-light);
        margin: 0;
        line-height: 1.6;
        font-size: 0.9rem;
    }

    .help-text {
        background: var(--primar-secondary);
        padding: 24px;
        border-radius: var(--primar-radius);
        border-left: 4px solid var(--primar-primary);
    }

    .help-text h4 {
        font-size: 1.1rem;
        font-weight: 600;
        color: var(--primar-text);
        margin: 0 0 16px 0;
    }

    .help-text ul {
        margin: 0;
        padding-left: 20px;
    }

    .help-text li {
        color: var(--primar-text-light);
        margin-bottom: 8px;
        line-height: 1.6;
    }

    .help-text li strong {
        color: var(--primar-text);
        font-weight: 600;
    }

    .contact-info {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 24px;
    }

    .contact-item {
        background: var(--primar-secondary);
        padding: 24px;
        border-radius: var(--primar-radius);
        border: 1px solid var(--primar-border);
    }

    .contact-item h4 {
        font-size: 1.1rem;
        font-weight: 600;
        color: var(--primar-text);
        margin: 0 0 16px 0;
        padding-bottom: 8px;
        border-bottom: 2px solid var(--primar-primary);
    }

    .contact-item p {
        color: var(--primar-text-light);
        margin: 0 0 8px 0;
        display: flex;
        align-items: center;
        gap: 8px;
    }

    .contact-item p i {
        color: var(--primar-primary);
        width: 16px;
    }

    @@media (max-width: 1024px) {
        .help-container {
            grid-template-columns: 1fr;
            gap: 24px;
        }

        .help-nav {
            position: static;
            order: 2;
        }

        .help-content {
            order: 1;
        }
    }

    @@media (max-width: 768px) {
        .estados-grid {
            grid-template-columns: 1fr;
        }

        .contact-info {
            grid-template-columns: 1fr;
        }

        .step {
            flex-direction: column;
            text-align: center;
        }

        .estado-item {
            flex-direction: column;
            text-align: center;
        }
    }

    @@keyframes fadeInUp {
        from { opacity: 0; transform: translateY(20px); }
        to { opacity: 1; transform: translateY(0); }
    }
</style>

<!-- Header de Ayuda -->
<div class="help-header">
    <div class="header-content">
        <h1 class="header-title">
            <i class="fas fa-question-circle" style="margin-right: 12px;"></i>
            Centro de Ayuda
        </h1>
        <p class="header-subtitle">
            Guía completa para usar el Sistema de Rendiciones Primar
        </p>
    </div>
</div>

<div class="help-container">
    <!-- Navegación lateral -->
    <div class="help-nav">
        <h3>Temas de Ayuda</h3>
        <ul class="help-topics">
            <li><a href="#como-crear" class="help-link">Cómo crear una rendición</a></li>
            <li><a href="#estados" class="help-link">Estados de las rendiciones</a></li>
            <li><a href="#archivos" class="help-link">Subir documentos</a></li>
            <li><a href="#seguimiento" class="help-link">Seguimiento del proceso</a></li>
            <li><a href="#notificaciones" class="help-link">Notificaciones</a></li>
            <li><a href="#contacto" class="help-link">Contacto y soporte</a></li>
        </ul>
    </div>
    
    <!-- Contenido principal -->
    <div class="help-content">
        <section id="como-crear" class="help-section">
            <h2>
                <i class="fas fa-plus-circle"></i>
                Cómo crear una rendición
            </h2>
            <div class="help-steps">
                <div class="step">
                    <div class="step-number">1</div>
                    <div class="step-content">
                        <h4>Acceder al formulario</h4>
                        <p>Haz clic en "Nueva Rendición" desde el menú principal o desde el inicio.</p>
                    </div>
                </div>
                <div class="step">
                    <div class="step-number">2</div>
                    <div class="step-content">
                        <h4>Completar información personal</h4>
                        <p>Ingresa tu nombre completo, RUT, teléfono, cargo y departamento.</p>
                    </div>
                </div>
                <div class="step">
                    <div class="step-number">3</div>
                    <div class="step-content">
                        <h4>Detalles de la rendición</h4>
                        <p>Ingresa un título descriptivo, descripción detallada y monto total de los gastos.</p>
                    </div>
                </div>
                <div class="step">
                    <div class="step-number">4</div>
                    <div class="step-content">
                        <h4>Subir documentos</h4>
                        <p>Adjunta todas las facturas, boletas y comprobantes en formato PDF, JPG o Excel.</p>
                    </div>
                </div>
                <div class="step">
                    <div class="step-number">5</div>
                    <div class="step-content">
                        <h4>Enviar rendición</h4>
                        <p>Revisa toda la información y presiona "Enviar Rendición". Se generará un número de ticket único.</p>
                    </div>
                </div>
            </div>
        </section>
        
        <section id="estados" class="help-section">
            <h2>
                <i class="fas fa-info-circle"></i>
                Estados de las rendiciones
            </h2>
            <div class="estados-grid">
                <div class="estado-item">
                    <div class="estado-icon pendiente">
                        <i class="fas fa-clock"></i>
                    </div>
                    <div class="estado-info">
                        <h4>Pendiente</h4>
                        <p>Tu rendición ha sido enviada y está esperando la primera aprobación por parte de Camila Flores.</p>
                    </div>
                </div>
                <div class="estado-item">
                    <div class="estado-icon aprobado-1">
                        <i class="fas fa-check"></i>
                    </div>
                    <div class="estado-info">
                        <h4>Aprobado 1° Instancia</h4>
                        <p>Camila Flores ha aprobado tu rendición. Ahora espera la aprobación final de Don Juan.</p>
                    </div>
                </div>
                <div class="estado-item">
                    <div class="estado-icon aprobado-2">
                        <i class="fas fa-check-double"></i>
                    </div>
                    <div class="estado-info">
                        <h4>Aprobado Final</h4>
                        <p>Don Juan ha dado la aprobación final. Tu rendición está lista para ser pagada.</p>
                    </div>
                </div>
                <div class="estado-item">
                    <div class="estado-icon pagado">
                        <i class="fas fa-credit-card"></i>
                    </div>
                    <div class="estado-info">
                        <h4>Pagado ✓✓</h4>
                        <p>Tu rendición ha sido pagada exitosamente. El proceso está completo.</p>
                    </div>
                </div>
            </div>
        </section>
        
        <section id="archivos" class="help-section">
            <h2>
                <i class="fas fa-paperclip"></i>
                Subir documentos
            </h2>
            <div class="help-text">
                <h4>Formatos permitidos:</h4>
                <ul>
                    <li><strong>PDF:</strong> Ideal para facturas y documentos oficiales</li>
                    <li><strong>Imágenes:</strong> JPG, PNG para fotos de boletas o recibos</li>
                    <li><strong>Excel:</strong> XLSX, XLS para planillas de gastos</li>
                </ul>
                
                <h4>Recomendaciones:</h4>
                <ul>
                    <li>Asegúrate de que los documentos sean legibles</li>
                    <li>Incluye todos los comprobantes de gastos</li>
                    <li>Si tienes muchos documentos, puedes crear un PDF consolidado</li>
                    <li>El tamaño máximo por archivo es de 10 MB</li>
                </ul>
            </div>
        </section>
        
        <section id="seguimiento" class="help-section">
            <h2>
                <i class="fas fa-search"></i>
                Seguimiento del proceso
            </h2>
            <div class="help-text">
                <p>Puedes hacer seguimiento de tus rendiciones de varias formas:</p>
                <ul>
                    <li><strong>Inicio:</strong> Ve un resumen del estado de todas tus rendiciones</li>
                    <li><strong>Lista de rendiciones:</strong> Ve todas tus rendiciones ordenadas por fecha</li>
                    <li><strong>Detalle:</strong> Ve el timeline completo del proceso de aprobación</li>
                    <li><strong>Notificaciones:</strong> Recibe alertas en el sistema y por email</li>
                </ul>
            </div>
        </section>
        
        <section id="notificaciones" class="help-section">
            <h2>
                <i class="fas fa-bell"></i>
                Notificaciones
            </h2>
            <div class="help-text">
                <p>Recibirás notificaciones automáticas cuando:</p>
                <ul>
                    <li>Tu rendición sea aprobada en primera instancia</li>
                    <li>Tu rendición sea aprobada finalmente</li>
                    <li>Tu rendición sea pagada</li>
                    <li>Haya comentarios del aprobador</li>
                </ul>
                <p>Las notificaciones aparecen en el sistema y también se envían a tu email registrado.</p>
            </div>
        </section>
        
        <section id="contacto" class="help-section">
            <h2>
                <i class="fas fa-envelope"></i>
                Contacto y soporte
            </h2>
            <div class="contact-info">
                <div class="contact-item">
                    <h4>Soporte Técnico</h4>
                    <p><i class="fas fa-envelope"></i> soporte@primar.cl</p>
                </div>
                <div class="contact-item">
                    <h4>Consultas sobre Rendiciones</h4>
                    <p><i class="fas fa-envelope"></i> cflores@primar.cl</p>
                    <p><i class="fas fa-user"></i> Camila Flores</p>
                </div>
                <div class="contact-item">
                    <h4>Administración</h4>
                    <p><i class="fas fa-envelope"></i> juan@primar.cl</p>
                    <p><i class="fas fa-user"></i> Don Juan</p>
                </div>
            </div>
        </section>
    </div>
</div>

@section Scripts {
    <script>
        // Smooth scrolling para los enlaces de ayuda
        document.querySelectorAll('.help-link').forEach(link => {
            link.addEventListener('click', function(e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({ behavior: 'smooth' });
                }
            });
        });

        // Resaltar enlace activo
        const observerOptions = {
            threshold: 0.5,
            rootMargin: '-100px 0px -100px 0px'
        };

        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    // Remover clase activa de todos los enlaces
                    document.querySelectorAll('.help-link').forEach(link => {
                        link.style.background = '';
                        link.style.color = '';
                    });
                    
                    // Agregar clase activa al enlace correspondiente
                    const id = entry.target.getAttribute('id');
                    const activeLink = document.querySelector(`[href="#${id}"]`);
                    if (activeLink) {
                        activeLink.style.background = 'var(--primar-gradient)';
                        activeLink.style.color = 'white';
                    }
                }
            });
        }, observerOptions);

        // Observar todas las secciones
        document.querySelectorAll('.help-section').forEach(section => {
            observer.observe(section);
        });
    </script>
}